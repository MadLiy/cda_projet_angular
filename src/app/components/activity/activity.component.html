<div class="activities-container">

  <div class="activities-header">
    <h4>Activit√©s pr√©vues</h4>
    <button mat-raised-button color="primary" (click)="openActivityDialog()">
      ‚ûï Ajouter une activit√©
    </button>
  </div>

  @if(loading()) {
    <div class="loading-spinner">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
      <span>Chargement des activit√©s...</span>
    </div>
  }

  @if(error()) {
    <div class="error">{{ error() }}</div>
  }

  @if(!loading() && !error() && (!activities() || activities().length === 0)) {
    <p class="no-activity no-step">Aucune activit√© pr√©vue</p>
  }

  <div class="activities-list">
    @for(activity of activities(); track activity.id) {
      <mat-card class="activity-card">
        <mat-card-header>
          <mat-card-title>{{ activity.title }}</mat-card-title>
          <mat-card-subtitle>
            <span [class.done]="activity.status === 'faite'">{{ activity.status }}</span>
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <p>{{ activity.description }}</p>
          @if(activity.schedule) {
            <p>üïí {{ activity.schedule }}</p>
          }
        </mat-card-content>

        <mat-card-actions class="activity-actions">
          <button mat-stroked-button color="primary" (click)="openActivityDialog(activity)">Modifier</button>
          <button mat-stroked-button color="warn" (click)="confirmDelete(activity.id)">Supprimer</button>
          <button mat-stroked-button (click)="toggleStatus(activity)">
            {{ activity.status === 'prevue' ? 'Marquer faite' : 'Marquer pr√©vue' }}
          </button>
        </mat-card-actions>
      </mat-card>
    }
  </div>

</div>
